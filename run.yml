---
#
# Tasks and roles for all hosts
#
- hosts:
    vps:
      ansible_host: '{{ ansible_host }}'
      ansible_user: ubuntu
      ansible_ssh_private_key_file: LightsailKey
      become: yes

  vars_files:
    - secret.yml

  roles:
      #
      # Basics
      #
      - role: system
        tags:
            - system

      - role: geerlingguy.security
        tags:
            - security

      - role: geerlingguy.docker
        tags:
            - docker

      - role: tailscale
        when: tailscale_enabled | default(false)
        tags:
            - tailscale